{% extends "base.html" %}

{% block title %}My Profile{% endblock %}

{% block content %}
<div class="mb-8 page-content">
    <div class="flex justify-between items-center">
        <h1 class="text-3xl font-semibold text-gray-900">My Profile</h1>
        <a href="{{ url_for('update_my_profile') }}" class="btn btn-primary">
            <svg class="w-5 h-5 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
            </svg>
            Update Profile
        </a>
    </div>
</div>

<div class="max-w-2xl">
    <div class="bg-white rounded-lg shadow card-animate">
        <div class="px-6 py-6 border-b flex items-center gap-6">
            <img src="{{ url_for('static', filename='images/profiles/' + (current_user.profile_image if current_user.profile_image else 'default-avatar.svg')) }}" 
                 alt="{{ current_user.name }}" 
                 class="profile-image profile-image-lg">
            <div>
                <h2 class="text-2xl font-bold text-gray-900">{{ current_user.name }}</h2>
                <p class="text-gray-600">{{ current_user.role.title if current_user.role else 'N/A' }}</p>
                <p class="text-sm text-gray-500 mt-1">Employee ID: <span class="font-mono font-semibold text-blue-600">WFX-{{ "%04d"|format(current_user.employee_id) }}</span></p>
            </div>
        </div>
        
        <div class="px-6 py-6 space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Email</label>
                    <p class="mt-2 text-gray-900">{{ current_user.email }}</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Phone</label>
                    <p class="mt-2 text-gray-900">{{ current_user.phone }}</p>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Department</label>
                    <p class="mt-2 text-gray-900">{{ current_user.department.name if current_user.department else 'N/A' }}</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Role</label>
                    <p class="mt-2 text-gray-900">{{ current_user.role.title if current_user.role else 'N/A' }}</p>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Hire Date</label>
                    <p class="mt-2 text-gray-900">{{ current_user.date_joined.strftime('%b %d, %Y') if current_user.date_joined else 'N/A' }}</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Annual Salary</label>
                    <p class="mt-2 text-gray-900">â‚¬{{ "{:,.2f}".format(current_user.salary) if current_user.salary else 'N/A' }}</p>
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700">Status</label>
                <p class="mt-2">
                    <span class="inline-block px-3 py-1 rounded-full text-sm font-medium 
                        {% if current_user.status == 'active' %}bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200
                        {% else %}bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200{% endif %}">
                        {{ current_user.status|title }}
                    </span>
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
