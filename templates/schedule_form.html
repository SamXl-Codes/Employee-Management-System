{% extends "base.html" %}
{% block title %}Create Schedule - WorkFlowX{% endblock %}
{% block content %}
<div class="container mx-auto px-4 py-8 max-w-2xl">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">Create New Schedule</h1>
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8">
        <form method="POST">
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Employee *</label>
                <select name="employee_id" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                    <option value="">-- Select Employee --</option>
                    {% for emp in employees %}
                    <option value="{{ emp.employee_id }}">{{ emp.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Shift Template (Optional)</label>
                <select name="shift_id" id="shift_id" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                    <option value="">-- Custom Times --</option>
                    {% for shift in shifts %}
                    <option value="{{ shift.shift_id }}" data-start="{{ shift.start_time.strftime('%H:%M') }}" data-end="{{ shift.end_time.strftime('%H:%M') }}">{{ shift.shift_name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="grid grid-cols-3 gap-6 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Date *</label>
                    <input type="date" name="date" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Start Time *</label>
                    <input type="time" name="start_time" id="start_time" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">End Time *</label>
                    <input type="time" name="end_time" id="end_time" required class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                </div>
            </div>
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Notes</label>
                <textarea name="notes" rows="3" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"></textarea>
            </div>
            <button type="submit" class="w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-medium">Create Schedule</button>
        </form>
    </div>
    <script>
        document.getElementById('shift_id').addEventListener('change', function() {
            const selected = this.options[this.selectedIndex];
            if (selected.value) {
                document.getElementById('start_time').value = selected.dataset.start;
                document.getElementById('end_time').value = selected.dataset.end;
            }
        });
    </script>
</div>
{% endblock %}
